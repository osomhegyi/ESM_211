<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>portfolio_9_recapr</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Portfolio_9_Recapr_files/libs/clipboard/clipboard.min.js"></script>
<script src="Portfolio_9_Recapr_files/libs/quarto-html/quarto.js"></script>
<script src="Portfolio_9_Recapr_files/libs/quarto-html/popper.min.js"></script>
<script src="Portfolio_9_Recapr_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Portfolio_9_Recapr_files/libs/quarto-html/anchor.min.js"></script>
<link href="Portfolio_9_Recapr_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Portfolio_9_Recapr_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Portfolio_9_Recapr_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Portfolio_9_Recapr_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Portfolio_9_Recapr_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<section id="portfolio-9---recapr" class="level1">
<h1>Portfolio 9 - Recapr</h1>
<p>Presented by Jerde</p>
<p>What does this package do? - It is a two event mark-recapture experiment. Catch fish, mark them, then try to catch some of those fish again. - Can use it all the time for different species. 2-event because with this, we assume a closed population. - Three main estimators are Peterson, Chapman, and Bailey. - Chapman is great for small sample sizes. If you get a lot of things marked, use Peterson. - How do we mark individuals, so that we can easily find if they were marked later? - m&amp;m example in class</p>
<p>Portfolio Assignment:</p>
<ol type="a">
<li>Run the Petersen Estimator for the Silver Carp parameters.</li>
<li>What is the difference between the Petersen and Chapman estimates and the confidence intervals?</li>
<li>How many M&amp;Ms are in this bag?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>here() starts at /Users/oliviasomhegyi/Desktop/Grad School/2nd_Year/Winter_Quarter/ESM_211/esm_211_lab</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.3     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.4     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(recapr)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 'recapr' package https://cran.r-project.org/web/packages/recapr/recapr.pdf</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>n1<span class="ot">&lt;-</span><span class="dv">75</span> <span class="co"># number of individuals marked in the first sampling</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>n2<span class="ot">&lt;-</span><span class="dv">100</span> <span class="co"># number of individuals captured in the second sampling effort</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>m2<span class="ot">&lt;-</span> <span class="dv">4</span> <span class="co"># number of individuals in the second sampling effort that were marked.</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Runs the model, get the estimate of N and calculates a confidence interval</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="fu">NPetersen</span>(n1, n2, m2) <span class="co"># estimates the population size</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1875</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="do">## population size estimate: 1875</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ciPetersen</span>(n1,n2,m2)  <span class="co"># 95% CIs using normal approximation ($ciNorm) and bootstrapping ($ciBoot)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Nhat
[1] 1875

$ciNorm
[1]   74.65812 3675.34188

$ciBoot
[1]  937.5 7500.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="do">## confidence interval: 937.5, 7500.0</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample size recommendation</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">n2RR</span>(<span class="at">N=</span><span class="dv">8000</span>, <span class="at">n1=</span><span class="dv">75</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$conf_0.99
  Rel acc n2 from specified n1 n if n1=n2
1    0.50                 3133        580
2    0.25                 5133        922
3    0.20                 5774       1084
4    0.15                 6492       1344
5    0.10                 7214       1821
6    0.05                 7781       2935
7    0.01                 7991       5939

$conf_0.95
  Rel acc n2 from specified n1 n if n1=n2
1    0.50                 1948        419
2    0.25                 3839        684
3    0.20                 4630        819
4    0.15                 5616       1040
5    0.10                 6704       1450
6    0.05                 7627       2442
7    0.01                 7985       5494

$conf_0.9
  Rel acc n2 from specified n1 n if n1=n2
1    0.50                 1308        330
2    0.25                 3016        563
3    0.20                 3842        685
4    0.15                 4943        881
5    0.10                 6262       1247
6    0.05                 7478       2153
7    0.01                 7978       5183

$conf_0.85
  Rel acc n2 from specified n1 n if n1=n2
1    0.50                  912        270
2    0.25                 2458        487
3    0.20                 3262        598
4    0.15                 4397        777
5    0.10                 5861       1110
6    0.05                 7331       1949
7    0.01                 7971       4935

$conf_0.8
  Rel acc n2 from specified n1 n if n1=n2
1    0.50                  646        225
2    0.25                 2034        430
3    0.20                 2791        532
4    0.15                 3913        696
5    0.10                 5470       1002
6    0.05                 7173       1782
7    0.01                 7964       4712

$conf_0.75
  Rel acc n2 from specified n1 n if n1=n2
1    0.50                  468        190
2    0.25                 1694        384
3    0.20                 2389        478
4    0.15                 3469        628
5    0.10                 5077        909
6    0.05                 6998       1636
7    0.01                 7955       4501</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotn2sim</span>(<span class="at">N=</span><span class="dv">8000</span>, <span class="at">n1=</span><span class="dv">75</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Portfolio_9_Recapr_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="silver-carp-study-peterson-and-chapman-estimates" class="level1">
<h1>Silver Carp Study; Peterson and Chapman Estimates</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Sass et al. (2010) Silver carp study</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>n1_sc <span class="ot">&lt;-</span> <span class="dv">4540</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>n2_sc <span class="ot">&lt;-</span> <span class="dv">2239</span> <span class="co">#approximated from the paper (not reported)</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>m2_sc <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Chapman estimate</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="fu">NChapman</span>(n1_sc, n2_sc, m2_sc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 328122.9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="do">## population size estimate: 328122.9</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ciChapman</span>(n1_sc, n2_sc, m2_sc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Nhat
[1] 328122.9

$ciNorm
[1] 215611.3 440634.5

$ciBoot
[1] 242185.7 484372.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="do">## confidence interval: 242185.7, 484372.3</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Peterson estimate</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Runs the model, get the estimate of N and calculates a confidence interval</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">NPetersen</span>(n1_sc, n2_sc, m2_sc) <span class="co"># estimates the population size</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 338835.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="do">## population size estimate: 338835.3</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ciPetersen</span>(n1_sc,n2_sc,m2_sc)  <span class="co"># 95% CIs using normal approximation ($ciNorm) and bootstrapping ($ciBoot)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Nhat
[1] 338835.3

$ciNorm
[1] 218401.9 459268.7

$ciBoot
[1] 247928.3 508253.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="do">## confidence interval: 247928.3, 508253.0</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample size recommendation</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="fu">n2RR</span>(<span class="at">N=</span><span class="dv">328192</span>, <span class="at">n1=</span><span class="dv">4540</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$conf_0.99
  Rel acc n2 from specified n1 n if n1=n2
1    0.50                 3436       3951
2    0.25                 9386       6537
3    0.20                13422       7835
4    0.15                21693      10025
5    0.10                43019      14434
6    0.05               120896      27223
7    0.01               306908     101812

$conf_0.95
  Rel acc n2 from specified n1 n if n1=n2
1    0.50                 1727       2803
2    0.25                 4905       4719
3    0.20                 7250       5740
4    0.15                12238       7476
5    0.10                25720      10957
6    0.05                82415      21064
7    0.01               293076      83667

$conf_0.9
  Rel acc n2 from specified n1 n if n1=n2
1    0.50                 1051       2189
2    0.25                 3233       3832
3    0.20                 4911       4722
4    0.15                 8498       6218
5    0.10                18345       9193
6    0.05                62557      17838
7    0.01               280472      73213

$conf_0.85
  Rel acc n2 from specified n1 n if n1=n2
1    0.50                  693       1779
2    0.25                 2376       3286
3    0.20                 3674       4085
4    0.15                 6454       5415
5    0.10                14149       8049
6    0.05                50084      15706
7    0.01               268536      65908

$conf_0.8
  Rel acc n2 from specified n1 n if n1=n2
1    0.50                  474       1471
2    0.25                 1830       2885
3    0.20                 2866       3608
4    0.15                 5085       4805
5    0.10                11268       7169
6    0.05                40954      14049
7    0.01               256337      59996

$conf_0.75
  Rel acc n2 from specified n1 n if n1=n2
1    0.50                  335       1238
2    0.25                 1444       2563
3    0.20                 2281       3220
4    0.15                 4079       4304
5    0.10                 9111       6440
6    0.05                33793      12662
7    0.01               243482      54880</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotn2sim</span>(<span class="at">N=</span><span class="dv">328192</span>, <span class="at">n1=</span><span class="dv">4540</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Portfolio_9_Recapr_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol start="2" type="a">
<li>What is the difference between the Petersen and Chapman estimates and the confidence intervals?</li>
</ol>
<p>Answer: The Chapman population estimate is 328,123, while the Peterson population estimate is 338,835. The Peterson estimate is about 10,000 fish greater. The Chapman confidence interval is 242185.7, 484372.3, while the Peterson confidence interval is 247928.3, 508253.0. Both of the population estimate fall within the confidence interval, but the confidence interval for the Peterson method is slightly larger and has greater values.</p>
<ol start="3" type="a">
<li>How many M&amp;Ms are in this bag?</li>
</ol>
<p>Answer: The model estimate from the second capture was 694 m&amp;m’s, which is closer to the true value at 1171 than the estimate of the first run. While the estimate was below the true value, the true value is within the confidence interval, which is great! Between the two captures, the second capture was more accurate and has a smaller confidence interval.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># m&amp;m's</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># first capture</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>n1_mm <span class="ot">&lt;-</span> <span class="dv">75</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>n2_mm <span class="ot">&lt;-</span> <span class="dv">59</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>m2_mm <span class="ot">&lt;-</span> <span class="dv">7</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co"># peterson esitmate</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="fu">NPetersen</span>(n1_mm, n2_mm, m2_mm) <span class="co"># output: 632.1429</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 632.1429</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Peterson confidence interval</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ciPetersen</span>(n1_mm,n2_mm,m2_mm) <span class="co"># output: 368.75, 1475.00</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Nhat
[1] 632.1429

$ciNorm
[1]  192.5102 1071.7755

$ciBoot
[1]  368.75 1475.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># second capture:</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>n3_mm <span class="ot">&lt;-</span> <span class="dv">176</span> <span class="co">#approximated from the paper (not reported)</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>m3_mm <span class="ot">&lt;-</span> <span class="dv">19</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Peterson estimate</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="fu">NPetersen</span>(n1_mm, n3_mm, m3_mm) <span class="co"># output: 694.7368</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 694.7368</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Peterson confidence interval</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ciPetersen</span>(n1_mm,n3_mm,m3_mm) <span class="co"># output: 488.89, 1200</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Nhat
[1] 694.7368

$ciNorm
[1] 399.6940 989.7797

$ciBoot
[1]  488.8889 1200.0000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># total m&amp;m's in the bag: 1171</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample size recommendation</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="fu">n2RR</span>(<span class="at">N=</span><span class="dv">694</span>, <span class="at">n1=</span><span class="dv">75</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$conf_0.99
  Rel acc n2 from specified n1 n if n1=n2
1    0.50                  255        146
2    0.25                  429        213
3    0.20                  487        242
4    0.15                  552        283
5    0.10                  620        348
6    0.05                  673        461
7    0.01                  694        630

$conf_0.95
  Rel acc n2 from specified n1 n if n1=n2
1    0.50                  157        110
2    0.25                  316        168
3    0.20                  384        194
4    0.15                  472        234
5    0.10                  572        298
6    0.05                  659        416
7    0.01                  693        612

$conf_0.9
  Rel acc n2 from specified n1 n if n1=n2
1    0.50                  104         89
2    0.25                  245        142
3    0.20                  316        168
4    0.15                  412        206
5    0.10                  531        268
6    0.05                  645        386
7    0.01                  692        599

$conf_0.85
  Rel acc n2 from specified n1 n if n1=n2
1    0.50                   73         74
2    0.25                  199        126
3    0.20                  266        150
4    0.15                  364        186
5    0.10                  495        246
6    0.05                  631        363
7    0.01                  692        587

$conf_0.8
  Rel acc n2 from specified n1 n if n1=n2
1    0.50                   51         62
2    0.25                  164        113
3    0.20                  226        136
4    0.15                  322        170
5    0.10                  459        227
6    0.05                  616        343
7    0.01                  691        576

$conf_0.75
  Rel acc n2 from specified n1 n if n1=n2
1    0.50                   37         53
2    0.25                  136        102
3    0.20                  193        124
4    0.15                  284        156
5    0.10                  424        211
6    0.05                  599        324
7    0.01                  690        565</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotn2sim</span>(<span class="at">N=</span><span class="dv">694</span>, <span class="at">n1=</span><span class="dv">75</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Portfolio_9_Recapr_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>